<div class="p-text-center titulo">
    <h1 class="display-3 ">ALUMNOS</h1>
</div>

<div class="p-grid">
    <div class="p-col"  >
        <div class="p-fluid">
            <div class="p-field p-grid">
                <label  for="ambiente" class="p-col-3">Seleccionar ambiente</label>
                <div class="p-col">
                    <p-dropdown id="ambienteId" [options]="ambientes" [(ngModel)]="selectedAmbiente" optionLabel="anio" (onChange)="onChangeAmbientes($event.value)"
                            placeholder="Buscar ambiente..." >
                                <ng-template pTemplate="selectedItem">
                                    <div *ngIf="selectedAmbiente" >
                                        {{selectedAmbiente.nivel.nombre}} - {{selectedAmbiente.aula.nombre}} ({{selectedAmbiente.anio}})
                                    </div>
                                </ng-template>

                                <ng-template let-ambiente pTemplate="item" >
                                     {{ambiente.nivel.nombre}} - {{ambiente.aula.nombre}} ({{ambiente.anio}})
                                </ng-template>
                            </p-dropdown>

                </div>
                <div class="p-col-1">
                    <p-button styleClass="p-button-sm" label="Ver todos" class="p-button-secondary" (click)="reloadComponent()" ></p-button>
                </div>
            </div>
        </div>
       
    </div>
</div>

<div class="p-grid">
    <div class="p-col">
        <p-table [value]="alumnos">
         
            <ng-template pTemplate="header">
                <tr>
                    <th>Foto</th>
                    <th>DNI</th>
                    <th>Apellido Paterno</th>
                    <th>Apellido Materno</th>
                    <th>Nombres</th>
                    <th>Matricula</th>
                    <th>Ficha</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-alumno>
                <tr>
                       
                    <td>
                        <img [src]="alumno.host_imagen ?  alumno.host_imagen :'https://www.uaa.mx/portal/wp-content/themes/UAAV1/images/autor-nofoto.jpg'" class="img-fluid avatar">
                  
                    </td>
                    <td>{{alumno.documento_identidad}}</td>
                    <td>{{alumno.apellido_paterno}}</td>
                    <td>{{alumno.apellido_materno}}</td>
                    <td>{{alumno.nombres}}</td> 

                    <td>    
                        <div *ngIf="alumno.distribucion_ambientes[0]">
                            {{alumno.distribucion_ambientes[0].nivel.nombre}} - {{alumno.distribucion_ambientes[0].aula.nombre}} ({{alumno.distribucion_ambientes[0].anio}}) 
                        </div>
                        
                    </td>
                    <td>
                        <button pButton      type="button" icon="pi pi-eye" class="p-button-rounded"></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>

